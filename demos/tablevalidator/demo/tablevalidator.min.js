/*!
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * v4.0.75 - 2024-03-25
 *
 */
/*!
 * Web Experience Toolkit ( WET ) / Boîte à outils de l'expérience Web ( BOEW )
 * wet-boew.github.io/wet-boew/License-eng.html / wet-boew.github.io/wet-boew/Licence-fra.html
 */
!function(D,r){"use strict";var e=".wb-tblvalidator",t=".wb-tableparser",a=r.doc,o="idsheaders"+e,d="scope"+e,s="simple"+e,q="showhtml"+e,A="log"+e,H="#formtablevalidator",l={"%tblparser1":"Only table can be parsed with this parser","%tblparser2":"The table was already parsed.","%tblparser3":"The first colgroup must be spanned to represent the header column group","%tblparser3Tech":6,"%tblparser4":" You have an invalid cell inside a row description","%tblparser4Tech":4,"%tblparser5":"You need at least one data colgroup, review your table structure","%tblparser5Tech":8,"%tblparser6":"The Lowest column group level have been found, You may have an error in you column structure","%tblparser6Tech":9,"%tblparser7":"The initial colgroup should group all the header, there are no place for any data cell","%tblparser7Tech":4,"%tblparser9":"Error in you header row group, there are cell that are crossing more than one colgroup","%tblparser9Tech":4,"%tblparser10":"The header group cell used to represent the data at level must encapsulate his group","%tblparser10Tech":7,"%tblparser12":"Last summary row group already found","%tblparser12Tech":3,"%tblparser13":"Error, Row group not calculated","%tblparser14":"You can not have a summary at level under 0, add a group header or merge a tbody togheter","%tblparser14Tech":3,"%tblparser15":"tr element need to only have th or td element as his child","%tblparser16":"The row do not have a good width","%tblparser16Tech":12,"%tblparser17":"The layout cell is not empty","%tblparser17Tech":11,"%tblparser18":"Row group header not well structured.","%tblparser18Tech":7,"%tblparser21":"Move the row used as the column cell heading in the thead row group","%tblparser21Tech":7,"%tblparser23":"Avoid the use of have paralel row headers, it's recommended do a cell merge to fix it","%tblparser23Tech":3,"%tblparser24":"For a data row, the heading hiearchy need to be the Generic to the specific","%tblparser24Tech":3,"%tblparser25":"You have a problematic key cell","%tblparser25Tech":0,"%tblparser26":"You can not define any row before the thead group","%tblparser26Tech":12,"%tblparser27":"thead element need to only have tr element as his child","%tblparser27Tech":12,"%tblparser29":"You cannot span cell in 2 different rowgroup","%tblparser29Tech":12,"%tblparser30":"Use the appropriate table markup","%tblparser30Tech":12,"%tblparser31":"Internal Error, Number of virtual column must be set [ function processColgroup( ) ]","%tblparser32":"Check your row cell headers structure","%tblparser32Tech":3,"%tblparser34":"Mark properly your data row group.","%tblparser34Tech":1,"%tblparser35":"Column, col element, are not correctly defined","%tblparser35Tech":12},i=["keycell-techniques.html","rowgrouping-techniques.html","summariesrowgroup-techniques.html","headerrowgroupstructure-techniques.html","rowheader-description-techniques.html","rowgroupheader-description-techniques.html","colgroupheader-techniques.html","headercolgroupstructure-techniques.html","datacolgroup-techniques.html","colgroupsummary-techniques.html","colheader-description-techniques.html","layoutcell-techniques.html","https://html.spec.whatwg.org/multipage/tables.html#tables"],c=["Defining a Key Cell","Defining a Data Row Group in a Data Table","Summaries a Data Row Group in a Data Table","Structuring the Header Row in a Data Table","Describing a Row Header Cell in a Data Table","Describing a Row Group Header Cell in a Data Table","Defining Column Group Header in a Data Table","Structuring the Header Column Cell in a Data Table","Defining a Data Column Group in a Data Table","Summaries a Data Column Group in a Data Table","Describing a Column Header Cell in a Data Table","Defining a Layout Cell in a Data Table","HTML Standard: Tabular data"];a.on("submit",H,function(){return!1}),a.on(q,"#visualoutput > table:eq( 0 )",function(e){var r=e.target,t=D("#results");if(e.currentTarget!==r)return!0;e=("<table>"+D(r).html()+"</table>").replace(/<col>/g,"<col />").replace(/<br>/g,"<br />").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),t.html("<pre class='prettyprint'><code>"+e+"</code></pre>"),"function"==typeof window.prettyPrint&&window.prettyPrint(),D(H).trigger({type:A,logtype:"Information",logmessage:"Result Displayed"})}),a.on(o,"#visualoutput > table:eq( 0 )",function(e){var r,t,a,l,o,d,s,i,c,h,p,u,n,g,m,b,w,v,f,y,T,k,S=e.target,R=void 0,C=!1;if(e.currentTarget!==S)return!0;for(D(H).trigger({type:A,logtype:"Information",logmessage:"Accessibility Strategy: Ids/Headers"}),r=(e=D(S)).data().tblparser,c=e.data().wbvalidateoptions.prefix||"wb-tablevalidated",t=0;t<r.theadRowStack.length;t+=1)for(s=r.theadRowStack[t],d=0;d<s.cell.length;d+=1)1!==(i=s.cell[d]).type&&7!==i.type||0<d&&i.uid===s.cell[d-1].uid||0<t&&i.uid===r.theadRowStack[t-1].cell[d].uid||(void 0!==(o=D(i.elem).attr("id"))&&""!==o||(o=c+i.uid,D(i.elem).attr("id",o)),0<t&&(h=D(r.theadRowStack[t-1].cell[d].elem).attr("id"),void 0!==D(r.theadRowStack[t-1].cell[d].elem).attr("headers")&&(h=D(r.theadRowStack[t-1].cell[d].elem).attr("headers")+" "+h),D(i.elem).attr("headers",h),void 0!==D(i.elem).attr("headers")&&""!==D(i.elem).attr("headers")||D(i.elem).removeAttr("headers")),i.descCell&&(D(i.descCell.elem).attr("headers",o),void 0!==D(i.descCell.elem).attr("headers")&&""!==D(i.descCell.elem).attr("headers")||D(i.descCell.elem).removeAttr("headers"),void 0!==(h=D(i.descCell.elem).attr("id"))&&""!==h||D(i.descCell.elem).attr("id",h),D(i.elem).attr("aria-describedby",h)));for(t=0;t<r.row.length;t+=1){if(g=n=u=p="",(s=r.row[t]).headerset&&!s.idsrowheaders){for(d=0;d<s.headerset.length;d+=1)void 0!==(o=D(s.headerset[d].elem).attr("id"))&&""!==o||(o=c+s.headerset[d].uid,D(s.headerset[d].elem).attr("id",o)),p=p?p+" "+o:o;s.idsrowheaders=p}if(s.header)for(d=0;d<s.header.length;d+=1)void 0!==(o=D(s.header[d].elem).attr("id"))&&""!==o||(o=c+s.header[d].uid,D(s.header[d].elem).attr("id",o)),u=u?u+" "+o:o;for(u=s.idsrowheaders?s.idsrowheaders+" "+u:u,d=0;d<s.cell.length;d+=1)if(!s.cell[d].processed&&(0===d||0<d&&s.cell[d].uid!==s.cell[d-1].uid)){if(m="",(i=s.cell[d]).col&&!i.col.dataheaders){if(v=w="",(b=i.col).headerLevel)for(a=0;a<b.headerLevel.length;a+=1)void 0!==(o=D(b.headerLevel[a].elem).attr("id"))&&""!==o||(o=c+b.headerLevel[a].uid,D(b.headerLevel[a].elem).attr("id",o)),v=v?v+" "+o:o;if(b.header)for(a=0;a<b.header.length;a+=1)void 0!==(o=D(b.header[a].elem).attr("id"))&&""!==o||(o=c+b.header[a].uid,D(b.header[a].elem).attr("id",o)),w=w?w+" "+o:o;b.dataheaders=v?v+" "+w:w}if(i.col&&i.col.dataheaders&&(m=i.col.dataheaders),1===i.type&&(D(i.elem).attr("headers",(m||"")+(s.idsrowheaders&&m?" ":"")+(s.idsrowheaders||"")+(s.idsrowheaders&&g||m&&g&&!s.idsrowheaders?" ":"")+(g||"")),void 0!==D(i.elem).attr("headers")&&""!==D(i.elem).attr("headers")||D(i.elem).removeAttr("headers"),void 0!==(T=D(i.elem).attr("id"))&&""!==T||(T=c+i.uid,D(i.elem).attr("id",T)),g=(""!==g?g+" ":"")+T),2===i.type||3===i.type){if(n=u,i.addcolheaders)for(a=0;a<i.addcolheaders.length;a+=1)void 0!==(o=D(i.addcolheaders[a].elem).attr("id"))&&""!==o||(o=c+i.addcolheaders[a].uid,D(i.addcolheaders[a].elem).attr("id",o)),m=m?m+" "+o:o;if(i.addrowheaders)for(a=0;a<i.addrowheaders.length;a+=1)void 0!==(o=D(i.addrowheaders[a].elem).attr("id"))&&""!==o||(o=c+i.addrowheaders[a].uid,D(i.addrowheaders[a].elem).attr("id",o)),n=n?n+" "+o:o;D(i.elem).attr("headers",(m||"")+(n&&m?" ":"")+(n||"")),void 0!==D(i.elem).attr("headers")&&""!==D(i.elem).attr("headers")||D(i.elem).removeAttr("headers")}if(4===i.type||5===i.type){if(k="",i.describe)for(a=0;a<i.describe.length;a+=1)void 0!==(o=D(i.describe[a].elem).attr("id"))&&""!==o||(o=c+i.describe[a].uid,D(i.describe[a].elem).attr("id",o)),k=k?k+" "+o:o,5!==i.type||D(i.describe[a].elem).attr("aria-describedby")||(void 0!==(o=D(i.elem).attr("id"))&&""!==o||(o=c+i.uid,D(i.elem).attr("id",o)),D(i.describe[a].elem).attr("aria-describedby",o));4!==i.type?(D(i.elem).attr("headers",(m||"")+(m&&k?" ":"")+(k||"")),void 0!==D(i.elem).attr("headers")&&""!==D(i.elem).attr("headers")||D(i.elem).removeAttr("headers")):D(i.elem).attr("aria-describedby")||(D(i.elem).attr("aria-describedby",k||""),D(i.elem).attr("headers",m||""),void 0!==D(i.elem).attr("headers")&&""!==D(i.elem).attr("headers"))||D(i.elem).removeAttr("headers")}i.processed=!0}}for(t=0;t<r.lstrowgroup.length;t+=1)if(0<r.lstrowgroup[t].headerlevel.length)for(d=0;d<r.lstrowgroup[t].headerlevel.length;d+=1)r.lstrowgroup[t].headerlevel[d].descCell&&(void 0!==(f=D(r.lstrowgroup[t].headerlevel[d].descCell.elem).attr("id"))&&""!==f||(f=c+r.lstrowgroup[t].headerlevel[d].descCell.uid,D(r.lstrowgroup[t].headerlevel[d].descCell.elem).attr("id",f)),D(r.lstrowgroup[t].headerlevel[d].elem).attr("aria-describedby",f),void 0!==(o=D(r.lstrowgroup[t].headerlevel[d].elem).attr("id"))&&""!==o||(o=c+r.lstrowgroup[t].headerlevel[d].uid,D(r.lstrowgroup[t].headerlevel[d].elem).attr("id",o)),D(r.lstrowgroup[t].headerlevel[d].descCell.elem).attr("headers",o));for(t=0;t<r.colgroup.length;t+=1)if(void 0===r.colgroup[t].elem){for(l=D("<colgroup></colgroup>"),d=0;d<r.colgroup[t].col.length;d+=1)y=D("<col />"),D(l).append(y),r.colgroup[t].col[d].elem=D(y).get(0),D(y).data().tblparser=r.colgroup[t].col[d];C?D(C).after(l):D(R).has("caption")?D("caption:eq( 0 )",R).after(l):D(R).prepend(l),C=l,r.colgroup[t].elem=D(l).get(0),D(l).data().tblparser=r.colgroup[t]}else for(l=r.colgroup[t].elem,D(l).removeAttr("span"),d=0;d<r.colgroup[t].col.length;d+=1)void 0===r.colgroup[t].col[d].elem&&(y=D("<col />"),D(l).append(y),r.colgroup[t].col[d].elem=D(y).get(0),D(y).data().tblparser=r.colgroup[t].col[d]);e.trigger(q)}),a.on(d,"#visualoutput > table:eq( 0 )",function(e){var r,t,a,l=e.target;if(e.currentTarget!==l)return!0;for(D(H).trigger({type:A,logtype:"Information",logmessage:"Accessibility Strategy: Scope"}),r=(e=D(l)).data().tblparser,t=0;t<r.lstrowgroup.length;t+=1)for(r.lstrowgroup[t].headerlevel&&r.lstrowgroup[t].headerlevel[0]&&D(r.lstrowgroup[t].headerlevel[0].elem).attr("scope","rowgroup"),a=0;a<r.lstrowgroup[t].row.length;a+=1)1===r.lstrowgroup[t].row[a].cell[0].type&&D(r.lstrowgroup[t].row[a].cell[0].elem).attr("scope","row");if(2===r.theadRowStack.length)for(t=1===r.colgroup[0].type?r.colgroup[0].end:0;t<r.theadRowStack[0].cell.length;t+=1)0!==t&&r.theadRowStack[0].cell[t-1].uid===r.theadRowStack[0].cell[t].uid||D(r.theadRowStack[0].cell[t].elem).attr("scope","colgroup");if(1===r.theadRowStack.length||2===r.theadRowStack.length)for(t=0;t<r.theadRowStack[1===r.theadRowStack.length?0:1].cell.length;t+=1)1===r.theadRowStack[1===r.theadRowStack.length?0:1].cell[t].type&&D(r.theadRowStack[1===r.theadRowStack.length?0:1].cell[t].elem).attr("scope","col");e.trigger(q)}),a.on(s,"#visualoutput > table:eq( 0 )",function(e){var r=e.target;if(e.currentTarget!==r)return!0;D(H).trigger({type:A,logtype:"Information",logmessage:"Accessibility Strategy: Nothing"}),D(r).trigger(q)}),a.on("parsecomplete.wb-tableparser","#visualoutput > table:eq( 0 )",function(e){var r,t,a,l=e.target;if(e.currentTarget!==l)return!0;if(t=(r=D(l)).data().tblparser,"headers"===(e=r.data().wbvalidateoptions).accessibilty||2<t.theadRowStack.length||t.desccell||t.keycell||2===t.colgroup[0].type&&2<t.colgroup[0].col.length)r.trigger(o);else{for(a=0;a<t.lstrowgroup.length;a+=1)if(!(2===t.lstrowgroup[a].type&&t.lstrowgroup[a].level<=2||3===t.lstrowgroup[a].type&&0===t.lstrowgroup[a].level))return void r.trigger(o);if(t.colgroup[0]&&1===t.colgroup[0].type&&6===t.theadRowStack[0].cell[0].type)a=t.colgroup[0].end;else{if(2!==t.colgroup[0].type)return void r.trigger(o);a=0}for(;a<t.theadRowStack[0].cell.length;a+=1)if(t.theadRowStack[0].cell[a].colgroup&&(t.theadRowStack[0].cell[a].colgroup.start===t.theadRowStack[0].cell[a].colgroup.end||t.theadRowStack[0].cell[a].colgroup.start!==t.theadRowStack[0].cell[a].colpos||t.theadRowStack[0].cell[a].colgroup.end!==t.theadRowStack[0].cell[a].colpos+t.theadRowStack[0].cell[a].width-1||2!==t.theadRowStack[0].cell[a].colgroup.type))return void r.trigger(o);"auto"===e.accessibilty&&t.theadRowStack.length<=1&&(1===t.lstrowgroup.length||2===t.lstrowgroup[0].type&&3===t.lstrowgroup[1].type&&0===t.lstrowgroup[1].level)?r.trigger(s):"auto"===e.accessibilty||"scope"===e.accessibilty?r.trigger(d):r.trigger(o)}}),a.on("error"+t,"#visualoutput > table:eq( 0 )",function(e){var e=e.err,r="#"+e+", ",t="",t=l["%tblparser"+e];r+=t=void 0!==l["%tblparser"+e+"Tech"]?"<a href='"+i[e=l["%tblparser"+e+"Tech"]]+"' title='"+c[e]+"'>"+t+"</a>":t,D(H).trigger({type:A,logtype:"Error",logmessage:r})}),a.on("warning"+t,"#visualoutput > table:eq( 0 )",function(e){var e=e.err,r="#"+e+", ",t="",t=l["%tblparser"+e];r+=t=void 0!==l["%tblparser"+e+"Tech"]?"<a href='"+i[e=l["%tblparser"+e+"Tech"]]+"' title='"+c[e]+"'>"+t+"</a>":t,D(H).trigger({type:A,logtype:"Warning",logmessage:r})}),a.on("click","#validatetable",function(){var e;D("#visualoutput").empty(),D("#errors").empty(),D("#visualoutput").append(D("#inputsourcecode").val()),(e=D("#visualoutput > table:eq( 0 )")).length||(D(H).trigger({type:A,logtype:"Error",logmessage:"No HTML Table code provided in input"}),alert("Please add HTML Table code"),D("#inputsourcecode").focus()),D("#chkCleanMarkup").is(":checked")||(D("[ headers ]",e).each(function(){D(this).removeAttr("headers")}),D("[ aria-describedby ]",e).each(function(){D(this).removeAttr("aria-describedby")}),D("[ id ]",e).each(function(){D(this).removeAttr("id")}),D("[ scope ]",e).each(function(){D(this).removeAttr("scope")}),D("[ class ]",e).each(function(){D(this).removeAttr("class")})),e.data().wbvalidateoptions=function(e){var r={};D("#chkHassum").is(":checked")&&e.addClass("hassum");D("#access-1").is(":checked")?r.accessibilty="auto":D("#access-2").is(":checked")?r.accessibilty="scope":r.accessibilty="headers";r.prefix=D("#idprefix").val(),D("#uniqueprefix").is(":checked")&&(r.prefix="tbl"+((new Date).getTime()+"-").substring(5));return r}(e),Modernizr.load({load:["site!deps/tableparser"+r.getMode()+".js"],complete:function(){e.trigger("passiveparse.wb-tableparser")}}),e.addClass("table table-lined")}),a.on(A,H,function(e){e="<li><strong>"+e.logtype+":</strong> "+e.logmessage+"</li>";D("#errorslist").length||D("#errors").append("<ul id='errorslist'></ul>"),D("#errorslist").append(e)})}(jQuery,wb);