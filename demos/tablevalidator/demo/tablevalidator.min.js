/*!
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * v4.0.56.1 - 2022-11-23
 *
 */
/*!
 * Web Experience Toolkit ( WET ) / Boîte à outils de l'expérience Web ( BOEW )
 * wet-boew.github.io/wet-boew/License-eng.html / wet-boew.github.io/wet-boew/Licence-fra.html
 */
!function(q,r){"use strict";var e=".wb-tblvalidator",t=".wb-tableparser",a=r.doc,o="idsheaders"+e,d="scope"+e,s="simple"+e,A="showhtml"+e,H="log"+e,L="#formtablevalidator",l={"%tblparser1":"Only table can be parsed with this parser","%tblparser2":"The table was already parsed.","%tblparser3":"The first colgroup must be spanned to represent the header column group","%tblparser3Tech":6,"%tblparser4":" You have an invalid cell inside a row description","%tblparser4Tech":4,"%tblparser5":"You need at least one data colgroup, review your table structure","%tblparser5Tech":8,"%tblparser6":"The Lowest column group level have been found, You may have an error in you column structure","%tblparser6Tech":9,"%tblparser7":"The initial colgroup should group all the header, there are no place for any data cell","%tblparser7Tech":4,"%tblparser9":"Error in you header row group, there are cell that are crossing more than one colgroup","%tblparser9Tech":4,"%tblparser10":"The header group cell used to represent the data at level must encapsulate his group","%tblparser10Tech":7,"%tblparser12":"Last summary row group already found","%tblparser12Tech":3,"%tblparser13":"Error, Row group not calculated","%tblparser14":"You can not have a summary at level under 0, add a group header or merge a tbody togheter","%tblparser14Tech":3,"%tblparser15":"tr element need to only have th or td element as his child","%tblparser16":"The row do not have a good width","%tblparser16Tech":12,"%tblparser17":"The layout cell is not empty","%tblparser17Tech":11,"%tblparser18":"Row group header not well structured.","%tblparser18Tech":7,"%tblparser21":"Move the row used as the column cell heading in the thead row group","%tblparser21Tech":7,"%tblparser23":"Avoid the use of have paralel row headers, it's recommended do a cell merge to fix it","%tblparser23Tech":3,"%tblparser24":"For a data row, the heading hiearchy need to be the Generic to the specific","%tblparser24Tech":3,"%tblparser25":"You have a problematic key cell","%tblparser25Tech":0,"%tblparser26":"You can not define any row before the thead group","%tblparser26Tech":12,"%tblparser27":"thead element need to only have tr element as his child","%tblparser27Tech":12,"%tblparser29":"You cannot span cell in 2 different rowgroup","%tblparser29Tech":12,"%tblparser30":"Use the appropriate table markup","%tblparser30Tech":12,"%tblparser31":"Internal Error, Number of virtual column must be set [ function processColgroup( ) ]","%tblparser32":"Check your row cell headers structure","%tblparser32Tech":3,"%tblparser34":"Mark properly your data row group.","%tblparser34Tech":1,"%tblparser35":"Column, col element, are not correctly defined","%tblparser35Tech":12},i=["keycell-techniques.html","rowgrouping-techniques.html","summariesrowgroup-techniques.html","headerrowgroupstructure-techniques.html","rowheader-description-techniques.html","rowgroupheader-description-techniques.html","colgroupheader-techniques.html","headercolgroupstructure-techniques.html","datacolgroup-techniques.html","colgroupsummary-techniques.html","colheader-description-techniques.html","layoutcell-techniques.html","https://html.spec.whatwg.org/multipage/tables.html#tables"],c=["Defining a Key Cell","Defining a Data Row Group in a Data Table","Summaries a Data Row Group in a Data Table","Structuring the Header Row in a Data Table","Describing a Row Header Cell in a Data Table","Describing a Row Group Header Cell in a Data Table","Defining Column Group Header in a Data Table","Structuring the Header Column Cell in a Data Table","Defining a Data Column Group in a Data Table","Summaries a Data Column Group in a Data Table","Describing a Column Header Cell in a Data Table","Defining a Layout Cell in a Data Table","HTML Standard: Tabular data"];a.on("submit",L,function(){return!1}),a.on(A,"#visualoutput > table:eq( 0 )",function(e){var r=e.target,t=q("#results");if(e.currentTarget!==r)return!0;r=("<table>"+q(r).html()+"</table>").replace(/<col>/g,"<col />").replace(/<br>/g,"<br />").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),t.html("<pre class='prettyprint'><code>"+r+"</code></pre>"),"function"==typeof window.prettyPrint&&window.prettyPrint(),q(L).trigger({type:H,logtype:"Information",logmessage:"Result Displayed"})}),a.on(o,"#visualoutput > table:eq( 0 )",function(e){var r,t,a,l,o,d,s,i,c,h,p,u,n,g,m,b,w,v,f,y,T,k,S,R=e.target,C=r,D=!1;if(e.currentTarget!==R)return!0;for(q(L).trigger({type:H,logtype:"Information",logmessage:"Accessibility Strategy: Ids/Headers"}),t=(r=q(R)).data().tblparser,h=r.data().wbvalidateoptions.prefix||"wb-tablevalidated",a=0;a<t.theadRowStack.length;a+=1)for(i=t.theadRowStack[a],s=0;s<i.cell.length;s+=1)1!==(c=i.cell[s]).type&&7!==c.type||0<s&&c.uid===i.cell[s-1].uid||0<a&&c.uid===t.theadRowStack[a-1].cell[s].uid||(void 0!==(d=q(c.elem).attr("id"))&&""!==d||(d=h+c.uid,q(c.elem).attr("id",d)),0<a&&(p=q(t.theadRowStack[a-1].cell[s].elem).attr("id"),void 0!==q(t.theadRowStack[a-1].cell[s].elem).attr("headers")&&(p=q(t.theadRowStack[a-1].cell[s].elem).attr("headers")+" "+p),q(c.elem).attr("headers",p),void 0!==q(c.elem).attr("headers")&&""!==q(c.elem).attr("headers")||q(c.elem).removeAttr("headers")),c.descCell&&(q(c.descCell.elem).attr("headers",d),void 0!==q(c.descCell.elem).attr("headers")&&""!==q(c.descCell.elem).attr("headers")||q(c.descCell.elem).removeAttr("headers"),void 0!==(p=q(c.descCell.elem).attr("id"))&&""!==p||q(c.descCell.elem).attr("id",p),q(c.elem).attr("aria-describedby",p)));for(a=0;a<t.row.length;a+=1){if(m=g=n=u="",(i=t.row[a]).headerset&&!i.idsrowheaders){for(s=0;s<i.headerset.length;s+=1)void 0!==(d=q(i.headerset[s].elem).attr("id"))&&""!==d||(d=h+i.headerset[s].uid,q(i.headerset[s].elem).attr("id",d)),u=u?u+" "+d:d;i.idsrowheaders=u}if(i.header)for(s=0;s<i.header.length;s+=1)void 0!==(d=q(i.header[s].elem).attr("id"))&&""!==d||(d=h+i.header[s].uid,q(i.header[s].elem).attr("id",d)),n=n?n+" "+d:d;for(n=i.idsrowheaders?i.idsrowheaders+" "+n:n,s=0;s<i.cell.length;s+=1)if(!i.cell[s].processed&&(0===s||0<s&&i.cell[s].uid!==i.cell[s-1].uid)){if(b="",(c=i.cell[s]).col&&!c.col.dataheaders){if(f=v="",(w=c.col).headerLevel)for(l=0;l<w.headerLevel.length;l+=1)void 0!==(d=q(w.headerLevel[l].elem).attr("id"))&&""!==d||(d=h+w.headerLevel[l].uid,q(w.headerLevel[l].elem).attr("id",d)),f=f?f+" "+d:d;if(w.header)for(l=0;l<w.header.length;l+=1)void 0!==(d=q(w.header[l].elem).attr("id"))&&""!==d||(d=h+w.header[l].uid,q(w.header[l].elem).attr("id",d)),v=v?v+" "+d:d;w.dataheaders=f?f+" "+v:v}if(c.col&&c.col.dataheaders&&(b=c.col.dataheaders),1===c.type&&(q(c.elem).attr("headers",(b||"")+(i.idsrowheaders&&b?" ":"")+(i.idsrowheaders||"")+(i.idsrowheaders&&m||b&&m&&!i.idsrowheaders?" ":"")+(m||"")),void 0!==q(c.elem).attr("headers")&&""!==q(c.elem).attr("headers")||q(c.elem).removeAttr("headers"),void 0!==(k=q(c.elem).attr("id"))&&""!==k||(k=h+c.uid,q(c.elem).attr("id",k)),m=(""!==m?m+" ":"")+k),2===c.type||3===c.type){if(g=n,c.addcolheaders)for(l=0;l<c.addcolheaders.length;l+=1)void 0!==(d=q(c.addcolheaders[l].elem).attr("id"))&&""!==d||(d=h+c.addcolheaders[l].uid,q(c.addcolheaders[l].elem).attr("id",d)),b=b?b+" "+d:d;if(c.addrowheaders)for(l=0;l<c.addrowheaders.length;l+=1)void 0!==(d=q(c.addrowheaders[l].elem).attr("id"))&&""!==d||(d=h+c.addrowheaders[l].uid,q(c.addrowheaders[l].elem).attr("id",d)),g=g?g+" "+d:d;q(c.elem).attr("headers",(b||"")+(g&&b?" ":"")+(g||"")),void 0!==q(c.elem).attr("headers")&&""!==q(c.elem).attr("headers")||q(c.elem).removeAttr("headers")}if(4===c.type||5===c.type){if(S="",c.describe)for(l=0;l<c.describe.length;l+=1)void 0!==(d=q(c.describe[l].elem).attr("id"))&&""!==d||(d=h+c.describe[l].uid,q(c.describe[l].elem).attr("id",d)),S=S?S+" "+d:d,5!==c.type||q(c.describe[l].elem).attr("aria-describedby")||(void 0!==(d=q(c.elem).attr("id"))&&""!==d||(d=h+c.uid,q(c.elem).attr("id",d)),q(c.describe[l].elem).attr("aria-describedby",d));4!==c.type?(q(c.elem).attr("headers",(b||"")+(b&&S?" ":"")+(S||"")),void 0!==q(c.elem).attr("headers")&&""!==q(c.elem).attr("headers")||q(c.elem).removeAttr("headers")):q(c.elem).attr("aria-describedby")||(q(c.elem).attr("aria-describedby",S||""),q(c.elem).attr("headers",b||""),void 0!==q(c.elem).attr("headers")&&""!==q(c.elem).attr("headers")||q(c.elem).removeAttr("headers"))}c.processed=!0}}for(a=0;a<t.lstrowgroup.length;a+=1)if(0<t.lstrowgroup[a].headerlevel.length)for(s=0;s<t.lstrowgroup[a].headerlevel.length;s+=1)t.lstrowgroup[a].headerlevel[s].descCell&&(void 0!==(y=q(t.lstrowgroup[a].headerlevel[s].descCell.elem).attr("id"))&&""!==y||(y=h+t.lstrowgroup[a].headerlevel[s].descCell.uid,q(t.lstrowgroup[a].headerlevel[s].descCell.elem).attr("id",y)),q(t.lstrowgroup[a].headerlevel[s].elem).attr("aria-describedby",y),void 0!==(d=q(t.lstrowgroup[a].headerlevel[s].elem).attr("id"))&&""!==d||(d=h+t.lstrowgroup[a].headerlevel[s].uid,q(t.lstrowgroup[a].headerlevel[s].elem).attr("id",d)),q(t.lstrowgroup[a].headerlevel[s].descCell.elem).attr("headers",d));for(a=0;a<t.colgroup.length;a+=1)if(void 0===t.colgroup[a].elem){for(o=q("<colgroup></colgroup>"),s=0;s<t.colgroup[a].col.length;s+=1)T=q("<col />"),q(o).append(T),t.colgroup[a].col[s].elem=q(T).get(0),q(T).data().tblparser=t.colgroup[a].col[s];D?q(D).after(o):q(C).has("caption")?q("caption:eq( 0 )",C).after(o):q(C).prepend(o),D=o,t.colgroup[a].elem=q(o).get(0),q(o).data().tblparser=t.colgroup[a]}else for(o=t.colgroup[a].elem,q(o).removeAttr("span"),s=0;s<t.colgroup[a].col.length;s+=1)void 0===t.colgroup[a].col[s].elem&&(T=q("<col />"),q(o).append(T),t.colgroup[a].col[s].elem=q(T).get(0),q(T).data().tblparser=t.colgroup[a].col[s]);r.trigger(A)}),a.on(d,"#visualoutput > table:eq( 0 )",function(e){var r,t,a,l=e.target;if(e.currentTarget!==l)return!0;for(q(L).trigger({type:H,logtype:"Information",logmessage:"Accessibility Strategy: Scope"}),r=(l=q(l)).data().tblparser,t=0;t<r.lstrowgroup.length;t+=1)for(r.lstrowgroup[t].headerlevel&&r.lstrowgroup[t].headerlevel[0]&&q(r.lstrowgroup[t].headerlevel[0].elem).attr("scope","rowgroup"),a=0;a<r.lstrowgroup[t].row.length;a+=1)1===r.lstrowgroup[t].row[a].cell[0].type&&q(r.lstrowgroup[t].row[a].cell[0].elem).attr("scope","row");if(2===r.theadRowStack.length)for(t=1===r.colgroup[0].type?r.colgroup[0].end:0;t<r.theadRowStack[0].cell.length;t+=1)0!==t&&r.theadRowStack[0].cell[t-1].uid===r.theadRowStack[0].cell[t].uid||q(r.theadRowStack[0].cell[t].elem).attr("scope","colgroup");if(1===r.theadRowStack.length||2===r.theadRowStack.length)for(t=0;t<r.theadRowStack[1===r.theadRowStack.length?0:1].cell.length;t+=1)1===r.theadRowStack[1===r.theadRowStack.length?0:1].cell[t].type&&q(r.theadRowStack[1===r.theadRowStack.length?0:1].cell[t].elem).attr("scope","col");l.trigger(A)}),a.on(s,"#visualoutput > table:eq( 0 )",function(e){var r=e.target;if(e.currentTarget!==r)return!0;q(L).trigger({type:H,logtype:"Information",logmessage:"Accessibility Strategy: Nothing"}),q(r).trigger(A)}),a.on("parsecomplete.wb-tableparser","#visualoutput > table:eq( 0 )",function(e){var r,t,a,l=e.target;if(e.currentTarget!==l)return!0;if(t=(r=q(l)).data().tblparser,"headers"===(l=r.data().wbvalidateoptions).accessibilty||2<t.theadRowStack.length||t.desccell||t.keycell||2===t.colgroup[0].type&&2<t.colgroup[0].col.length)r.trigger(o);else{for(a=0;a<t.lstrowgroup.length;a+=1)if(!(2===t.lstrowgroup[a].type&&t.lstrowgroup[a].level<=2||3===t.lstrowgroup[a].type&&0===t.lstrowgroup[a].level))return void r.trigger(o);if(t.colgroup[0]&&1===t.colgroup[0].type&&6===t.theadRowStack[0].cell[0].type)a=t.colgroup[0].end;else{if(2!==t.colgroup[0].type)return void r.trigger(o);a=0}for(;a<t.theadRowStack[0].cell.length;a+=1)if(t.theadRowStack[0].cell[a].colgroup&&(t.theadRowStack[0].cell[a].colgroup.start===t.theadRowStack[0].cell[a].colgroup.end||t.theadRowStack[0].cell[a].colgroup.start!==t.theadRowStack[0].cell[a].colpos||t.theadRowStack[0].cell[a].colgroup.end!==t.theadRowStack[0].cell[a].colpos+t.theadRowStack[0].cell[a].width-1||2!==t.theadRowStack[0].cell[a].colgroup.type))return void r.trigger(o);"auto"===l.accessibilty&&t.theadRowStack.length<=1&&(1===t.lstrowgroup.length||2===t.lstrowgroup[0].type&&3===t.lstrowgroup[1].type&&0===t.lstrowgroup[1].level)?r.trigger(s):"auto"!==l.accessibilty&&"scope"!==l.accessibilty?r.trigger(o):r.trigger(d)}}),a.on("error"+t,"#visualoutput > table:eq( 0 )",function(e){var r=e.err,t="#"+r+", ",e="",e=l["%tblparser"+r];void 0!==l["%tblparser"+r+"Tech"]&&(e="<a href='"+i[r=l["%tblparser"+r+"Tech"]]+"' title='"+c[r]+"'>"+e+"</a>"),t+=e,q(L).trigger({type:H,logtype:"Error",logmessage:t})}),a.on("warning"+t,"#visualoutput > table:eq( 0 )",function(e){var r=e.err,t="#"+r+", ",e="",e=l["%tblparser"+r];void 0!==l["%tblparser"+r+"Tech"]&&(e="<a href='"+i[r=l["%tblparser"+r+"Tech"]]+"' title='"+c[r]+"'>"+e+"</a>"),t+=e,q(L).trigger({type:H,logtype:"Warning",logmessage:t})}),a.on("click","#validatetable",function(){var e;q("#visualoutput").empty(),q("#errors").empty(),q("#visualoutput").append(q("#inputsourcecode").val()),(e=q("#visualoutput > table:eq( 0 )")).length||(q(L).trigger({type:H,logtype:"Error",logmessage:"No HTML Table code provided in input"}),alert("Please add HTML Table code"),q("#inputsourcecode").focus()),q("#chkCleanMarkup").is(":checked")||(q("[ headers ]",e).each(function(){q(this).removeAttr("headers")}),q("[ aria-describedby ]",e).each(function(){q(this).removeAttr("aria-describedby")}),q("[ id ]",e).each(function(){q(this).removeAttr("id")}),q("[ scope ]",e).each(function(){q(this).removeAttr("scope")}),q("[ class ]",e).each(function(){q(this).removeAttr("class")})),e.data().wbvalidateoptions=function(e){var r={};q("#chkHassum").is(":checked")&&e.addClass("hassum");q("#access-1").is(":checked")?r.accessibilty="auto":q("#access-2").is(":checked")?r.accessibilty="scope":r.accessibilty="headers";r.prefix=q("#idprefix").val(),q("#uniqueprefix").is(":checked")&&(r.prefix="tbl"+((new Date).getTime()+"-").substring(5));return r}(e),Modernizr.load({load:["site!deps/tableparser"+r.getMode()+".js"],complete:function(){e.trigger("passiveparse.wb-tableparser")}}),e.addClass("table table-lined")}),a.on(H,L,function(e){e="<li><strong>"+e.logtype+":</strong> "+e.logmessage+"</li>";q("#errorslist").length||q("#errors").append("<ul id='errorslist'></ul>"),q("#errorslist").append(e)})}(jQuery,wb);