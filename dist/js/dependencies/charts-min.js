/*!
 *
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 *
 * Version: v3.0.14-development Build: 2014-02-19 10:15 PM EST
 *
 */
(function(b){var a=window.pe||{fn:{}};a.fn.chartsGraph={generate:function(k){var p={},e,n=b(k),h=new Date().getTime(),j={},c={},q,m,g="",i,f=0;if(typeof(wet_boew_charts)!=="undefined"&&wet_boew_charts!==null){p=wet_boew_charts}e=b.extend(true,{"default-namespace":["wb-charts","wb-chart","wb-graph"],"graphclass-autocreate":true,"graphclass-overwrite-array-mode":true,"graphclass-typeof":"string","noencapsulation-autocreate":true,"topvalue-autocreate":true,"topvalue-typeof":"number","topvaluenegative-autocreate":true,"topvaluenegative-typeof":"boolean","bottomvalue-autocreate":true,"bottomvalue-typeof":"number","bottomvaluenegative-autocreate":true,"bottomvaluenegative-typeof":"boolean","nocutaxis-autocreate":true,"nocutaxis-typeof":"boolean","steps-autocreate":true,"steps-typeof":"number","decimal-autocreate":true,"decimal-typeof":"number","execdelay-autocreate":true,"execdelay-typeof":"number",serie:{type:"line",color:"blue"},serie2dAxis:{dasharray:"",fillopacity:100},heading2dAxis:{fill:"white",fillover:"blue",foreground:"black",foregroundover:"red"},"default-option":"type",type:"bar","type-autocreate":true,optionsClass:{"default-option":"type","type-autocreate":true,"color-autocreate":true,"overcolor-autocreate":true,"default-namespace":["wb-charts","wb-chart","wb-graph"],"dasharray-autocreate":true,"noencapsulation-autocreate":true,"fillopacity-autocreate":true,"fillopacity-typeof":"number"},width:b(k).width(),"width-typeof":"number",height:b(k).height(),"height-typeof":"number",maxwidth:"9999","maxwidth-typeof":"number",widthPadding:2,colors:["#be1e2d","#666699","#92d5ea","#ee8310","#8d10ee","#5a3b16","#26a4ed","#f45a90","#e9e744"],textColors:[],parsedirection:"x","parsedirection-typeof":"string","parsedirection-autocreate":true,drawDirection:"x",pieMargin:20,pieLabelsAsPercent:true,pieLabelPos:"inside",lineWeight:4,barGroupMargin:10,barMargin:1,font:{height:20,width:10,size:14},axis:{top:{tick:null,lenght:null,padding:null},right:{tick:null,lenght:null,padding:null},bottom:{tick:null,lenght:null,padding:null},left:{tick:null,lenght:null,padding:null},tick:true,lenght:4,padding:4,minNbIncrementStep:6}},p);function d(o){var r={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return(r[o.toLowerCase()]!=="undefined"?r[o.toLowerCase()]:(b.isArray(e.colors)?e.colors[0]:e.colors))}j.circleGraph={height:undefined,width:undefined,offset:{top:undefined,right:undefined,bottom:undefined,left:undefined},sizeMode:"minimal",maxWidth:600,minWidth:150,strokeWidth:3,minLevelWidth:25,levelPadding:10,nbPieByRow:undefined,props:{minWidth:100,minLevelWidth:50},captionFontSize:20,fontSize:10,piePadding:10,graphPadding:10,pieByRow:undefined,minPieWidth:undefined,graphTitle:undefined,legendContainer:undefined,paperContainer:undefined,paper:undefined,paperDOM:undefined,series:{},options:{},init:function(r,y){j.circleGraph.width=undefined;j.circleGraph.minWidth=150;j.circleGraph.minLevelWidth=25;j.circleGraph.levelPadding=10;j.circleGraph.series=r;j.circleGraph.options=y;j.circleGraph.width=j.circleGraph.options.width;var u=1,v=j.circleGraph.series.nbColLevel-1,x=(v*((j.circleGraph.minLevelWidth*2)+(j.circleGraph.levelPadding*2))+(v*(j.circleGraph.strokeWidth*2))),w=j.circleGraph.minWidth+(j.circleGraph.levelPadding*2)+(j.circleGraph.strokeWidth*2),o=x+w,s,t;j.circleGraph.pieByRow=u;if(!j.circleGraph.width||o>j.circleGraph.width){j.circleGraph.width=o}else{s=j.circleGraph.minWidth/o;t=j.circleGraph.minLevelWidth/o;j.circleGraph.minWidth=Math.floor(s*(j.circleGraph.width));j.circleGraph.minLevelWidth=Math.floor(t*(j.circleGraph.width))}j.circleGraph.height=j.circleGraph.width},generateGraph:function(s,u){j.circleGraph.paperContainer=s;j.circleGraph.paper=u;var o=1,t=1,r=0,v=false;b.each(j.circleGraph.series.series,function(){var L=[],y,N,z,O,G,x,w,H,D,A,K,M,B,J,F,C=[];v=false;N=b("<ul>").appendTo((b.isArray(j.circleGraph.paperContainer)?b(j.circleGraph.paperContainer[t-1]):j.circleGraph.paperContainer));j.circleGraph.legendContainer=N;z=(b.isArray(j.circleGraph.paper)?j.circleGraph.paper[t-1]:j.circleGraph.paper);t+=1;if(o>=(j.circleGraph.pieByRow*(t+1))){r=0}O=0;G=false;b.each(this.cell,function(){if(this.value<0){G=true}if(j.circleGraph.options.decimal){this.value=Math.floor(this.value*Math.pow(10,j.circleGraph.options.decimal))}O+=this.value});x=(j.circleGraph.width/2)+(j.circleGraph.width*r);w=(j.circleGraph.width/2)+(j.circleGraph.width*r);D="#000";A=0;K=90;M=Math.PI/180;J=500;function I(R,P){var Q=(j.circleGraph.minWidth/2)+j.circleGraph.strokeWidth+j.circleGraph.levelPadding+(j.circleGraph.series.nbColLevel-R-P-1)*(j.circleGraph.levelPadding+(j.circleGraph.strokeWidth*2)+j.circleGraph.minLevelWidth);return Q}function E(Q,P){return(I(Q,P)+j.circleGraph.minLevelWidth+j.circleGraph.strokeWidth)}F=j.circleGraph.series.nbColLevel;b.each(this.cell,function(){var ah=this.colPos,V="",P=F,af=[],aa=[],ak,ai,al,S,ac,aj,R,ad,ag,Q,U,ae,ap,Y,X,T,am,Z,W,ao,ab,an;b.each(j.circleGraph.series.heading,function(){if(this.colPos<ah&&ah<=(this.colPos+this.width)){if(this.level<=F&&F<=(this.level+this.height)){V=this.header;P=this.level}else{var aq={level:this.level,height:this.height,id:this.id,header:this.header,param:this.param};af.push(aq)}}});aa.push("M",x,w);ak=360*this.value/O;H=(j.circleGraph.minWidth/2);if(P<(F-1)){H+=((j.circleGraph.minLevelWidth+j.circleGraph.levelPadding+(j.circleGraph.strokeWidth*2))*((F-1)-P))}ai=K;al=x+H*Math.cos(-ai*M);S=w+H*Math.sin(-ai*M);aa.push("L",al,S);ac=K+ak;aj=x+H*Math.cos(-ac*M);R=w+H*Math.sin(-ac*M);B=ac;aa.push("A",H,H,0,+(ac-ai>180),0,aj,R);aa.push("z");b.each(af,function(){var aq=this,au=true,ar,at;aq.still=false;b.each(C,function(){if(this.id===aq.id){aq.still=true;this.still=true;au=false;return false}});if(!this.topX1){ar=I(this.level,this.height);at=E(this.level,this.height);this.topX1=x+at*Math.cos(-ai*M);this.topY1=w+at*Math.sin(-ai*M);this.bottomX1=x+ar*Math.cos(-ai*M);this.bottomY1=w+ar*Math.sin(-ai*M);this.r1=at;this.r2=ar;this.startAngle=ai;this.bcolor=Raphael.hsb(A,1,1);this.color=Raphael.hsb(A,0.75,1);this.start=A;A+=0.05}if(au){this.still=true;C.push(this)}});b.each(C,function(){if(!this.still&&!this.ignoreMe){var aE=I(this.level,this.height),aF=E(this.level,this.height),aJ=x+aF*Math.cos(-ai*M),av=w+aF*Math.sin(-ai*M),au=x+aE*Math.cos(-ai*M),aC=w+aE*Math.sin(-ai*M),aA=[],aq=(ai-this.startAngle)/360*100,at="90-"+this.bcolor+"-"+this.color,aK,ay,aw,ar,aD,aG,az,ax,aI,aB,aH;aA.push("M",this.topX1,this.topY1);aA.push("A",aF,aF,0,+(ai-this.startAngle>180),0,Math.ceil(aJ),Math.ceil(av));aA.push("L",Math.ceil(au),Math.ceil(aC));aA.push("A",aE,aE,0,+(ai-this.startAngle>180),1,Math.ceil(this.bottomX1),Math.ceil(this.bottomY1));aA.push("z");if(j.circleGraph.options.decimal){aq=aq*(Math.pow(10,j.circleGraph.options.decimal))}aq=Math.ceil(aq*1000);aq=Math.floor(aq/1000);if(j.circleGraph.options.decimal){aq=aq/(Math.pow(10,j.circleGraph.options.decimal))}if(this.param.color){at=d(this.param.color)}if(!v){aK=b("<li></li>").appendTo(b(N));ay=b('<span style="margin-right:7px;"></span>').appendTo(b(aK));aw=new Raphael(b(ay).get(0),j.circleGraph.options.font.size,j.circleGraph.options.font.size);ar=aw.rect(2,2,j.circleGraph.options.font.size-(2*2)+(2/2),j.circleGraph.options.font.size-(2*2)+(2/2));b(aK).append(this.header);ar.attr("fill",at)}aD=z.path(aA).attr({fill:at,stroke:D,"stroke-width":3,title:this.header+" ("+aq+"%)"});aG=((ai-this.startAngle)/2)+this.startAngle;az=z.text(x+(aF*Math.cos(-aG*M)),w+(aF*Math.sin(-aG*M)),aq+"%").attr({fill:"#000",stroke:"none",opacity:1,"font-size":j.circleGraph.fontSize});ax=az.getBBox();aI=z.rect(ax.x-10,ax.y-10,ax.width+(2*10),ax.height+(2*10)).attr({fill:"#FFF",stroke:"black","stroke-width":"1",opacity:1});L.push({txt:az,bg:aI});aB=this.start;aH=Raphael.hsb(aB,1,0.3);if(this.param.overcolor){aH=d(this.param.overcolor)}aD.mouseover(function(){aD.stop().attr({fill:aH});aI.stop().attr({"stroke-width":"3"});az.insertAfter(y);aI.insertBefore(az);y=az}).mouseout(function(){aD.stop().attr({fill:at});aI.stop().attr({"stroke-width":"1"})});aI.mouseover(function(){aD.stop().attr({fill:aH});aI.stop().attr({"stroke-width":"3"});az.insertAfter(y);aI.insertBefore(az);y=az}).mouseout(function(){aD.stop().attr({fill:at});aI.stop().attr({"stroke-width":"1"})});az.mouseover(function(){aD.stop().attr({fill:aH});aI.stop().attr({"stroke-width":"3"});az.insertAfter(y);aI.insertBefore(az);y=az}).mouseout(function(){aD.stop().attr({fill:at});aI.stop().attr({"stroke-width":"1"})});this.ignoreMe=true}this.still=false});ad=Raphael.hsb(A,1,1);ag=Raphael.hsb(A,0.75,1);Q=(ac-ai)/360*100;if(j.circleGraph.options.decimal){Q=Q*(Math.pow(10,j.circleGraph.options.decimal))}Q=Math.ceil(Q*1000);Q=Math.floor(Q/1000);if(j.circleGraph.options.decimal){Q=Q/(Math.pow(10,j.circleGraph.options.decimal))}U="90-"+ad+"-"+ag;if(this.param.color){U=d(this.param.color)}ae=z.path(aa).attr({fill:U,stroke:D,"stroke-width":3,title:V+" ("+Q+"%)"});if(!v){ap=b("<li></li>").appendTo(b(N));Y=b('<span style="margin-right:7px;"></span>').appendTo(b(ap));X=new Raphael(b(Y).get(0),j.circleGraph.options.font.size,j.circleGraph.options.font.size);T=X.rect(2,2,j.circleGraph.options.font.size-(2*2)+(2/2),j.circleGraph.options.font.size-(2*2)+(2/2));b(ap).append(V);T.attr("fill",U)}am=K+(ak/2);Z=z.text(x+(H*Math.cos(-am*M)),w+(H*Math.sin(-am*M)),Q+"%").attr({fill:"#000",stroke:"none",opacity:1,"font-size":j.circleGraph.fontSize});W=Z.getBBox();ao=z.rect(W.x-10,W.y-10,W.width+(2*10),W.height+(2*10)).attr({fill:"#FFF",stroke:"black","stroke-width":"1",opacity:1});L.push({txt:Z,bg:ao});ab=A;an=Raphael.hsb(ab,1,0.3);if(this.param.overcolor){an=d(this.param.overcolor)}ae.mouseover(function(){ae.stop().attr({fill:an});ao.stop().attr({"stroke-width":"3"});Z.insertAfter(y);ao.insertBefore(Z);y=Z}).mouseout(function(){ae.stop().attr({fill:U});ao.stop().attr({"stroke-width":"1"})});ao.mouseover(function(){ae.stop().attr({fill:an});ao.stop().attr({"stroke-width":"3"});Z.insertAfter(y);ao.insertBefore(Z);y=Z}).mouseout(function(){ae.stop().attr({fill:U});ao.stop().attr({"stroke-width":"1"})});Z.mouseover(function(){ae.stop().attr({fill:an});ao.stop().attr({"stroke-width":"3"});Z.insertAfter(y);ao.insertBefore(Z);y=Z}).mouseout(function(){ae.stop().attr({fill:U});ao.stop().attr({"stroke-width":"1"})});K+=ak;A+=0.1;o+=1;r+=1});b.each(C,function(){if(!this.ignoreMe){var ac=I(this.level,this.height),ad=E(this.level,this.height),ah=x+ad*Math.cos(-B*M),T=w+ad*Math.sin(-B*M),S=x+ac*Math.cos(-B*M),aa=w+ac*Math.sin(-B*M),Y=[],P,R,Q,U,W,ai,ab,ae,X,V,ag,Z,af;Y.push("M",this.topX1,this.topY1);Y.push("A",ad,ad,0,+(B-this.startAngle>180),0,Math.ceil(ah),Math.ceil(T));Y.push("L",Math.ceil(S),Math.ceil(aa));Y.push("A",ac,ac,0,+(B-this.startAngle>180),1,Math.ceil(this.bottomX1),Math.ceil(this.bottomY1));Y.push("z");P=(B-this.startAngle)/360*100;if(j.circleGraph.options.decimal){P=P*(Math.pow(10,j.circleGraph.options.decimal))}P=Math.ceil(P*1000);P=Math.floor(P/1000);if(j.circleGraph.options.decimal){P=P/(Math.pow(10,j.circleGraph.options.decimal))}R="90-"+this.bcolor+"-"+this.color;if(this.param.color){R=d(this.param.color)}if(!v){ai=b("<li></li>").appendTo(b(N));W=b('<span style="margin-right:7px;"></span>').appendTo(b(ai));U=new Raphael(b(W).get(0),j.circleGraph.options.font.size,j.circleGraph.options.font.size);Q=U.rect(2,2,j.circleGraph.options.font.size-(2*2)+(2/2),j.circleGraph.options.font.size-(2*2)+(2/2));b(ai).append(this.header);Q.attr("fill",R)}ab=z.path(Y).attr({fill:R,stroke:D,"stroke-width":3,title:this.header+" ("+P+"%)"});ae=((B-this.startAngle)/2)+this.startAngle;X=z.text(x+(ad*Math.cos(-ae*M)),w+(ad*Math.sin(-ae*M)),P+"%").attr({fill:"#000",stroke:"none",opacity:1,"font-size":j.circleGraph.fontSize});V=X.getBBox();ag=z.rect(V.x-10,V.y-10,V.width+(2*10),V.height+(2*10)).attr({fill:"#FFF",stroke:"black","stroke-width":"1",opacity:1});L.push({txt:X,bg:ag});Z=this.start;af=Raphael.hsb(Z,1,0.3);if(this.param.overcolor){af=d(this.param.overcolor)}ab.mouseover(function(){ab.stop().attr({fill:af});ag.stop().attr({"stroke-width":"3"});X.insertAfter(y);ag.insertBefore(X);y=X}).mouseout(function(){ab.stop().attr({fill:R});ag.stop().attr({"stroke-width":"1"})});ag.mouseover(function(){ab.stop().attr({fill:af});ag.stop().attr({"stroke-width":"3"});X.insertAfter(y);ag.insertBefore(X);y=X}).mouseout(function(){ab.stop().attr({fill:R});ag.stop().attr({"stroke-width":"1"})});X.mouseover(function(){ab.stop().attr({fill:af});ag.stop().attr({"stroke-width":"3"});X.insertAfter(y);ag.insertBefore(X);y=X}).mouseout(function(){ab.stop().attr({fill:R});ag.stop().attr({"stroke-width":"1"})});this.ignoreMe=true}});y=z.rect(0,0,1,1).attr({opacity:0});b.each(L,function(){this.txt.insertAfter(y);this.bg.insertBefore(this.txt)});y=L[L.length-1].txt;L=[];v=true})}};j.graph2dAxis={drawDirection:"x",height:undefined,width:undefined,offset:{top:undefined,right:undefined,bottom:undefined,left:undefined},cuttingOffset:undefined,xAxisOffset:undefined,cuttingPosPaper:undefined,NbColumnHeading:0,NbColumnHeaderLevel:undefined,zeroPos:undefined,cuttingPos:undefined,incrementation:undefined,nbStep:undefined,layout:{headingMinSize:undefined,nbColHeading:undefined},top:undefined,bottom:undefined,graphTitle:undefined,legendContainer:undefined,paperContainer:undefined,paper:undefined,paperDOM:undefined,series:{},options:{},setNbColumnHeading:function(){j.graph2dAxis.NbColumnHeading=0;j.graph2dAxis.NbColumnHeaderLevel=0;var o,r=[];b.each(j.graph2dAxis.series.heading,function(){if(!this.isGroup&&(this.colPos+this.width)>j.graph2dAxis.series.nbRowLevel){j.graph2dAxis.NbColumnHeading+=1;if(!r[this.level]||(this.header.length*j.graph2dAxis.options.font.width)>(r[this.level]*j.graph2dAxis.options.font.width)){r[this.level]=this.header.length*j.graph2dAxis.options.font.width}}if(this.level>j.graph2dAxis.NbColumnHeaderLevel||j.graph2dAxis.NbColumnHeaderLevel===undefined){j.graph2dAxis.NbColumnHeaderLevel=this.level}});j.graph2dAxis.NbColumnHeaderLevel+=1;o=(j.graph2dAxis.options.font.height*j.graph2dAxis.NbColumnHeaderLevel)+(j.graph2dAxis.options.axis.top.padding!==null?j.graph2dAxis.options.axis.top.padding:j.graph2dAxis.options.axis.padding);j.graph2dAxis.layout.headingMinSize=o},utils:{topRound:function(o){if(o>=0){o=Math.ceil(o)}else{o=Math.floor(o)}return o}},setHeightXLabel:function(){j.graph2dAxis.offset.top=(j.graph2dAxis.options.font.height/2);var r=Math.ceil((j.graph2dAxis.options.height-j.graph2dAxis.layout.headingMinSize)/j.graph2dAxis.options.font.height),o=r-j.graph2dAxis.NbColumnHeaderLevel;if(o<j.graph2dAxis.options.axis.minNbIncrementStep){o=j.graph2dAxis.options.axis.minNbIncrementStep;r=j.graph2dAxis.options.axis.minNbIncrementStep+j.graph2dAxis.NbColumnHeaderLevel}j.graph2dAxis.nbStep=o;j.graph2dAxis.options.height=(j.graph2dAxis.options.font.height*r)},setLeftOffset:function(){if(j.graph2dAxis.top.toString().length>j.graph2dAxis.bottom.toString().length){j.graph2dAxis.offset.left=j.graph2dAxis.options.font.width*j.graph2dAxis.top.toString().length}else{j.graph2dAxis.offset.left=j.graph2dAxis.options.font.width*j.graph2dAxis.bottom.toString().length}},setBottomOffset:function(){j.graph2dAxis.offset.bottom=j.graph2dAxis.options.height-(j.graph2dAxis.nbStep*j.graph2dAxis.options.font.height);if(j.graph2dAxis.cuttingPos>0){j.graph2dAxis.offset.bottom-=(2*j.graph2dAxis.options.font.height)}},setMetric:function(){var o,y,s,z,u=0,r,v,t,x,w;if(j.graph2dAxis.options.topvalue){if(j.graph2dAxis.options.topvaluenegative){o=-(j.graph2dAxis.options.topvalue)}else{o=j.graph2dAxis.options.topvalue}}if(j.graph2dAxis.options.bottomvalue){if(j.graph2dAxis.options.bottomvaluenegative){y=-(j.graph2dAxis.options.bottomvalue)}else{y=j.graph2dAxis.options.bottomvalue}}b.each(j.graph2dAxis.series.series,function(){b.each(this.cell,function(){if(o===undefined){o=this.value}if(o<this.value){o=this.value}if(y===undefined){y=this.value}if(y>this.value){y=this.value}})});if(o>0){r=Math.floor(o);o=(o-r>0?r+1:r)}else{o=Math.ceil(o)}y=Math.floor(y);if(o===y){if(o>0){y=0}else{if(o<0){o=0}else{y=-5;o=5}}}v=j.graph2dAxis.utils.topRound(o-y);s=j.graph2dAxis.utils.topRound(v/j.graph2dAxis.nbStep);z=Math.round(j.graph2dAxis.nbStep*o/v);if(z>j.graph2dAxis.nbStep){z=j.graph2dAxis.nbStep}if(z<0){z=1}t=j.graph2dAxis.utils.topRound(o/(z-1));x=Math.abs(j.graph2dAxis.utils.topRound(y/(j.graph2dAxis.nbStep-z)));if(t>s&&(y>=0||(o>0&&0>y))){s=t}if(x>s&&(o<=0||(o>0&&0>y))){s=x}w=j.graph2dAxis.utils.topRound(v/(j.graph2dAxis.nbStep-2));if(!j.graph2dAxis.options.nocutaxis){if(w<t&&y>0){u=(j.graph2dAxis.nbStep-1);j.graph2dAxis.nbStep=j.graph2dAxis.nbStep-2;s=w}if(w<x&&o<0){u=2;j.graph2dAxis.nbStep=j.graph2dAxis.nbStep-2;s=w}}if(j.graph2dAxis.options.steps){s=j.graph2dAxis.options.steps}if(u===0){o=j.graph2dAxis.utils.topRound((z-1)*s);y=Math.floor(o-((j.graph2dAxis.nbStep-1)*s))}else{y=Math.floor(o-((j.graph2dAxis.nbStep-1)*s))}j.graph2dAxis.top=o;j.graph2dAxis.bottom=y;j.graph2dAxis.zeroPos=z;j.graph2dAxis.cuttingPos=u;j.graph2dAxis.incrementation=s},init:function(r,o){j.graph2dAxis.series=r;j.graph2dAxis.options=o;j.graph2dAxis.setNbColumnHeading();if(j.graph2dAxis.drawDirection==="x"){j.graph2dAxis.setHeightXLabel();j.graph2dAxis.setMetric();j.graph2dAxis.cuttingOffset=0;if(j.graph2dAxis.cuttingPos===(j.graph2dAxis.nbStep-1)){j.graph2dAxis.cuttingOffset=j.graph2dAxis.options.font.height}}},generateGraph:function(o,r){j.graph2dAxis.paperContainer=o;j.graph2dAxis.paper=r;if(j.graph2dAxis.drawDirection==="x"){j.graph2dAxis.setLeftOffset();j.graph2dAxis.setBottomOffset();j.graph2dAxis.xAxis();j.graph2dAxis.xLabel();j.graph2dAxis.yAxisLabel();j.graph2dAxis.graph()}},xAxis:function(){j.graph2dAxis.xAxisOffset=(j.graph2dAxis.options.font.height*(j.graph2dAxis.zeroPos-1)+j.graph2dAxis.offset.top+j.graph2dAxis.cuttingOffset);var w="M "+j.graph2dAxis.offset.left+" "+j.graph2dAxis.xAxisOffset+" ",o,r,v,u,s;for(u=1,s=j.graph2dAxis.NbColumnHeading;u<=s;u+=1){o=(u*((j.graph2dAxis.options.width-j.graph2dAxis.offset.left)/j.graph2dAxis.NbColumnHeading));if(j.graph2dAxis.options.axis.tick||(j.graph2dAxis.options.axis.top.tick!==null?j.graph2dAxis.options.axis.top.tick:false)||(j.graph2dAxis.options.axis.bottom.tick!==null?j.graph2dAxis.options.axis.bottom.tick:false)){r=((u-1)*((j.graph2dAxis.options.width-j.graph2dAxis.offset.left)/j.graph2dAxis.NbColumnHeading));v=((o-r)/2)+r;v+=j.graph2dAxis.offset.left;w+="L "+v+" "+j.graph2dAxis.xAxisOffset+" ";if(j.graph2dAxis.options.axis.top.tick!==null?j.graph2dAxis.options.axis.top.tick:j.graph2dAxis.options.axis.tick){w+="L "+v+" "+(j.graph2dAxis.xAxisOffset-(j.graph2dAxis.options.axis.top.lenght!==null?j.graph2dAxis.options.axis.top.lenght:j.graph2dAxis.options.axis.lenght))+" "}if(j.graph2dAxis.options.axis.bottom.tick!==null?j.graph2dAxis.options.axis.bottom.tick:j.graph2dAxis.options.axis.tick){w+="L "+v+" "+(j.graph2dAxis.xAxisOffset+(j.graph2dAxis.options.axis.bottom.lenght!==null?j.graph2dAxis.options.axis.bottom.lenght:j.graph2dAxis.options.axis.lenght))+" "}w+="L "+v+" "+j.graph2dAxis.xAxisOffset+" "}o+=j.graph2dAxis.offset.left;w+="L "+o+" "+j.graph2dAxis.xAxisOffset+" "}try{j.graph2dAxis.paper.path(w)}catch(t){}},xLabel:function(){b.each(j.graph2dAxis.series.heading,function(){var E=this.colPos,t=(this.colPos+this.width),z,A,w,D="middle",x,G,F,v,o,r,u,B,C,y,s,H;if(E>=j.graph2dAxis.series.nbRowLevel){E-=j.graph2dAxis.series.nbRowLevel;t=t-j.graph2dAxis.series.nbRowLevel;z=Math.floor((j.graph2dAxis.options.width-j.graph2dAxis.offset.left)/(j.graph2dAxis.NbColumnHeading)*E);A=Math.floor((j.graph2dAxis.options.width-j.graph2dAxis.offset.left)/(j.graph2dAxis.NbColumnHeading)*t);w=z;w=Math.floor((A-z)/2)+z;w+=j.graph2dAxis.offset.left;x=(j.graph2dAxis.series.nbColLevel-this.height-this.level);o=(j.graph2dAxis.options.height-j.graph2dAxis.layout.headingMinSize)+(j.graph2dAxis.options.font.height*x);r=o+(this.height*j.graph2dAxis.options.font.height);u=o+((r-o)/2);B=z+j.graph2dAxis.offset.left;C=((j.graph2dAxis.options.width-j.graph2dAxis.offset.left)/(j.graph2dAxis.NbColumnHeading))*(this.width);y=r-o;s="50-#F4F4F4-#FFF";H="90-#FFF-#F4F4F4";if(this.param.fill){s=d(this.param.fill)}if(this.param.fillover){H=d(this.param.fillover)}G=j.graph2dAxis.paper.rect(B,o,C,y);G.attr("fill",s);G.attr("stroke-width","0");F=this.header;if((F.length*j.graph2dAxis.options.font.width)>C){F=F.substring(0,Math.floor(C/j.graph2dAxis.options.font.width))}v=j.graph2dAxis.paper.text(w,u,F);v.attr("text-anchor",D);v.attr("font-size",j.graph2dAxis.options.font.size+"px");v.attr("title",this.header);G.mouseover(function(){G.attr("fill",H)}).mouseout(function(){G.attr("fill",s)});v.mouseover(function(){G.attr("fill",H)}).mouseout(function(){G.attr("fill",s)})}})},yAxisLabel:function(){var t="M "+j.graph2dAxis.offset.left+" "+j.graph2dAxis.offset.top+" ",u,s,r,o;j.graph2dAxis.cuttingPosPaper=0;if(j.graph2dAxis.top<0){u=j.graph2dAxis.paper.text(j.graph2dAxis.offset.left-4,j.graph2dAxis.offset.top,0);u.attr("text-anchor","end");u.attr("font-size",j.graph2dAxis.options.font.size+"px");t+="L "+j.graph2dAxis.offset.left+" "+j.graph2dAxis.offset.top+" ";t+="L "+(j.graph2dAxis.offset.left+4)+" "+j.graph2dAxis.offset.top+" ";t+="L "+(j.graph2dAxis.offset.left-2)+" "+j.graph2dAxis.offset.top+" ";t+="L "+j.graph2dAxis.offset.left+" "+j.graph2dAxis.offset.top+" ";t+="L "+j.graph2dAxis.offset.left+" "+(j.graph2dAxis.offset.top+(j.graph2dAxis.options.font.height)-(j.graph2dAxis.options.font.height/4))+" ";t+="L "+(j.graph2dAxis.offset.left+10)+" "+(j.graph2dAxis.offset.top+(j.graph2dAxis.options.font.height))+" ";t+="L "+(j.graph2dAxis.offset.left-10)+" "+(j.graph2dAxis.offset.top+(j.graph2dAxis.options.font.height)-(j.graph2dAxis.options.font.height/2))+" ";j.graph2dAxis.paper.path(t);t="M "+j.graph2dAxis.offset.left+" "+(j.graph2dAxis.offset.top+j.graph2dAxis.options.font.height+(j.graph2dAxis.options.font.height/4))+" ";t+="L "+(j.graph2dAxis.offset.left+10)+" "+(j.graph2dAxis.offset.top+j.graph2dAxis.options.font.height+(j.graph2dAxis.options.font.height/2))+" ";t+="L "+(j.graph2dAxis.offset.left-10)+" "+(j.graph2dAxis.offset.top+j.graph2dAxis.options.font.height)+" ";t+="L "+(j.graph2dAxis.offset.left)+" "+(j.graph2dAxis.offset.top+j.graph2dAxis.options.font.height+(j.graph2dAxis.options.font.height/4))+" ";j.graph2dAxis.cuttingPosPaper=(j.graph2dAxis.offset.top+j.graph2dAxis.options.font.height);j.graph2dAxis.offset.top+=(2*j.graph2dAxis.options.font.height)}for(s=0,r=j.graph2dAxis.nbStep;s<r;s+=1){if(j.graph2dAxis.cuttingPos===0||(j.graph2dAxis.cuttingPos>s&&j.graph2dAxis.bottom>0)||j.graph2dAxis.top<0){u=j.graph2dAxis.paper.text(j.graph2dAxis.offset.left-4,j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height),(j.graph2dAxis.top-(s*j.graph2dAxis.incrementation)));u.attr("text-anchor","end");u.attr("font-size",j.graph2dAxis.options.font.size+"px");t+="L "+j.graph2dAxis.offset.left+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height))+" ";t+="L "+(j.graph2dAxis.offset.left+4)+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height))+" ";t+="L "+(j.graph2dAxis.offset.left-2)+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height))+" ";t+="L "+j.graph2dAxis.offset.left+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height))+" "}}if(j.graph2dAxis.cuttingPos>j.graph2dAxis.nbStep&&j.graph2dAxis.bottom>0){t+="L "+j.graph2dAxis.offset.left+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height)-(j.graph2dAxis.options.font.height/4))+" ";t+="L "+(j.graph2dAxis.offset.left-10)+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height))+" ";t+="L "+(j.graph2dAxis.offset.left+10)+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height)-(j.graph2dAxis.options.font.height/2))+" ";j.graph2dAxis.paper.path(t);t="M "+j.graph2dAxis.offset.left+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height)+(j.graph2dAxis.options.font.height/4))+" ";t+="L "+(j.graph2dAxis.offset.left-10)+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height)+(j.graph2dAxis.options.font.height/2))+" ";t+="L "+(j.graph2dAxis.offset.left+10)+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height))+" ";t+="L "+(j.graph2dAxis.offset.left)+" "+(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height)+(j.graph2dAxis.options.font.height/4))+" ";u=j.graph2dAxis.paper.text(j.graph2dAxis.offset.left-4,j.graph2dAxis.offset.top+((s+1)*j.graph2dAxis.options.font.height),0);u.attr("text-anchor","end");u.attr("font-size",j.graph2dAxis.options.font.size+"px");t+="L "+j.graph2dAxis.offset.left+" "+(j.graph2dAxis.offset.top+((s+1)*j.graph2dAxis.options.font.height))+" ";t+="L "+(j.graph2dAxis.offset.left+4)+" "+(j.graph2dAxis.offset.top+((s+1)*j.graph2dAxis.options.font.height))+" ";t+="L "+(j.graph2dAxis.offset.left-2)+" "+(j.graph2dAxis.offset.top+((s+1)*j.graph2dAxis.options.font.height))+" ";t+="L "+j.graph2dAxis.offset.left+" "+(j.graph2dAxis.offset.top+((s+1)*j.graph2dAxis.options.font.height))+" ";j.graph2dAxis.cuttingPosPaper=(j.graph2dAxis.offset.top+(s*j.graph2dAxis.options.font.height));j.graph2dAxis.options.height-=(2*j.graph2dAxis.options.font.height)}o=j.graph2dAxis.paper.path(t)},graph:function(){var u=0,r,s="line",v,o,t;b.each(j.graph2dAxis.series.series,function(){s=this.type;if(s==="bar"){u+=1;r="bar"}if(s==="stacked"&&(r!=="stacked"||r===undefined)){u+=1;r="stacked"}});r=undefined;v=-1;o=b("<ul>").appendTo(b(j.graph2dAxis.paperContainer));t=0;j.graph2dAxis.legendContainer=o;b.each(j.graph2dAxis.series.series,function(){var E=this,R=b("<li></li>").appendTo(b(o)),F=b('<span style="margin-right:7px;"></span>').appendTo(b(R)),D=new Raphael(b(F).get(0),j.graph2dAxis.options.font.size,j.graph2dAxis.options.font.size),A=D.rect(2,2,j.graph2dAxis.options.font.size-(2*2)+(2/2),j.graph2dAxis.options.font.size-(2*2)+(2/2)),Q,B="",x=0,H,G,J,S,K,O,P,L,I,N,M,z,C,w,y;s=this.type;if(j.graph2dAxis.options.colors[t]){Q=j.graph2dAxis.options.colors[t]}else{Q=j.graph2dAxis.options.colors[0]}if(E.param.color){Q=d(E.param.color)}if(E.param.dasharray){B=E.param.dasharray.toLowerCase();B=B.replace("space"," ").replace("dash","-").replace("dot",".").replace("none","")}if(G===undefined){G=E.header.rawValue}b.each(this.cell,function(){var U=(x*((j.graph2dAxis.options.width-j.graph2dAxis.offset.left)/j.graph2dAxis.NbColumnHeading)),T=((x+1)*((j.graph2dAxis.options.width-j.graph2dAxis.offset.left)/j.graph2dAxis.NbColumnHeading)),V=((T-U)/2)+U+j.graph2dAxis.offset.left;if(!this.isHeader){this.graphMinPos=U;this.graphMaxPos=T;this.graphCenterPos=V;this.graphValue=(((j.graph2dAxis.top-this.value)*(j.graph2dAxis.options.font.height*(j.graph2dAxis.nbStep-1))/(j.graph2dAxis.top-j.graph2dAxis.bottom))+j.graph2dAxis.offset.top);if(H===undefined){H=T-U}x+=1}});b(R).append(G);if(s==="line"||s==="area"){b.each(this.cell,function(){if(!this.isHeader){if(J===undefined){J="M "+this.graphCenterPos+" "}else{J+="L "+this.graphCenterPos+" "}J+=this.graphValue+" ";if(S===undefined){S=this.graphCenterPos}K=this.graphCenterPos}});if(s==="area"){if(j.graph2dAxis.cuttingPosPaper===0){J+="L "+K+" "+j.graph2dAxis.xAxisOffset+" ";J+="L "+S+" "+j.graph2dAxis.xAxisOffset+" ";J+="z"}else{if(j.graph2dAxis.top<0){J+=" L "+K+" "+(j.graph2dAxis.cuttingPosPaper+(j.graph2dAxis.options.font.height/2));J+=" L "+S+" "+j.graph2dAxis.cuttingPosPaper;J+=" z";O=j.graph2dAxis.paper.path(J);O.attr("stroke",Q);O.attr("stroke-dasharray",B);if(s==="area"){O.attr("fill",Q);O.attr("fill-opacity",(30/100))}J="M "+S+" "+(j.graph2dAxis.cuttingPosPaper-(j.graph2dAxis.options.font.height/2));J+=" L "+K+" "+j.graph2dAxis.cuttingPosPaper;J+=" L "+K+" "+j.graph2dAxis.xAxisOffset;J+=" L "+S+" "+j.graph2dAxis.xAxisOffset;J+=" z"}else{J+=" L "+K+" "+(j.graph2dAxis.cuttingPosPaper-(j.graph2dAxis.options.font.height/2));J+=" L "+S+" "+j.graph2dAxis.cuttingPosPaper;J+=" z";O=j.graph2dAxis.paper.path(J);O.attr("stroke",Q);O.attr("stroke-dasharray",B);if(s==="area"){O.attr("fill",Q);O.attr("fill-opacity",(30/100))}J="M "+S+" "+(j.graph2dAxis.cuttingPosPaper+(j.graph2dAxis.options.font.height/2));J+=" L "+K+" "+j.graph2dAxis.cuttingPosPaper;J+=" L "+K+" "+j.graph2dAxis.xAxisOffset;J+=" L "+S+" "+j.graph2dAxis.xAxisOffset;J+=" z"}}}O=j.graph2dAxis.paper.path(J);O.attr("stroke",Q);A.attr("stroke",Q);O.attr("stroke-dasharray",B);A.attr("stroke-dasharray",B);if(s==="area"){O.attr("fill",Q);A.attr("fill",Q);O.attr("fill-opacity",(30/100));A.attr("fill-opacity",(30/100))}else{A.attr("fill",Q)}}if(s==="bar"||s==="stacked"){if((r!=="stacked"&&s!=="stacked")||r!==s){v+=1}r=s;P=50;L=50;I=(u*100)+P+L;N=(P*H/I);M=(L*H/I);z=H-N-M;C=z/u;w=C*v;y=w+C;b.each(this.cell,function(){if(!this.isHeader){var V=this.graphMinPos+w+N+j.graph2dAxis.offset.left,U,T,W=C,Y="",X;if(j.graph2dAxis.xAxisOffset>=this.graphValue){U=this.graphValue;T=j.graph2dAxis.xAxisOffset-this.graphValue}else{U=j.graph2dAxis.xAxisOffset;T=this.graphValue-j.graph2dAxis.xAxisOffset}if(j.graph2dAxis.cuttingPosPaper===0){Y="M "+V+" "+U;Y+=" L "+(V+W)+" "+U;Y+=" L "+(V+W)+" "+(U+T);Y+=" L "+V+" "+(U+T);Y+=" z"}else{if(j.graph2dAxis.top<0){Y="M "+V+" "+U;Y+=" L "+(V+W)+" "+U;Y+=" L "+(V+W)+" "+j.graph2dAxis.cuttingPosPaper;Y+=" L "+V+" "+(j.graph2dAxis.cuttingPosPaper-(j.graph2dAxis.options.font.height/2));Y+=" z";X=j.graph2dAxis.paper.path(Y);X.attr("fill",Q);if(E.param.fillopacity){X.attr("fill-opacity",(E.param.fillopacity/100))}Y="M "+V+" "+j.graph2dAxis.cuttingPosPaper;Y+=" L "+(V+W)+" "+(j.graph2dAxis.cuttingPosPaper+(j.graph2dAxis.options.font.height/2));Y+=" L "+(V+W)+" "+(U+T);Y+=" L "+V+" "+(U+T);Y+=" z"}else{Y="M "+V+" "+U;Y+=" L "+(V+W)+" "+U;Y+=" L "+(V+W)+" "+(j.graph2dAxis.cuttingPosPaper-(j.graph2dAxis.options.font.height/2));Y+=" L "+V+" "+j.graph2dAxis.cuttingPosPaper;Y+=" z";X=j.graph2dAxis.paper.path(Y);X.attr("fill",Q);if(E.param.fillopacity){X.attr("fill-opacity",(E.param.fillopacity/100))}Y="M "+V+" "+(j.graph2dAxis.cuttingPosPaper+(j.graph2dAxis.options.font.height/2));Y+=" L "+(V+W)+" "+j.graph2dAxis.cuttingPosPaper;Y+=" L "+(V+W)+" "+(U+T);Y+=" L "+V+" "+(U+T);Y+=" z"}}X=j.graph2dAxis.paper.path(Y);X.attr("fill",Q);A.attr("fill",Q);if(E.param.fillopacity){X.attr("fill-opacity",(E.param.fillopacity/100));A.attr("fill-opacity",(E.param.fillopacity/100))}}})}t+=1})}};c={sourceTblSelf:undefined,param:{},parse:function(){c.sourceTblSelf=n;if(c.param.parsedirection==="y"||e.parsedirection==="y"){n=c.swapTable(c.sourceTblSelf)}c.setSeriesHeadingLenght();var r=[],o=[];b("tbody",n).each(function(){var t=[],s={headerList:[],series:[],param:c.classToJson(this)};b("tr",this).each(function(){var C=0,A=0,v=0,D=[],B=[],x="",w,z=false,u="",y;b.each(t,function(){if(this.colpos===A&&this.rowspan>0){var E=Number(b(this.ele.obj).attr("colspan")!==undefined?b(this.ele.obj).attr("colspan"):1),F;for(F=1;F<=E;F+=1){this.ele.colPos=F+A;if(this.ele.isHeader){B.push(jQuery.extend(true,{},this.ele))}else{D.push(jQuery.extend(true,{},this.ele))}}A+=E;if(b(this.ele.obj).get(0).nodeName.toLowerCase()==="th"&&c.seriesHeadingLenght>A){C+=1;if(this.rowspan>=1){v=this.ele.id}}this.rowspan-=1}});b("th, td",this).each(function(){c.cellID+=1;var N=c.getCellValue(b(this).text()),F={id:c.cellID,isHeader:false,rowPos:c.rowPos,rawValue:b(this).text(),value:N.cellValue,unit:N.cellUnit,obj:b(this),param:c.classToJson(this)},O=Number(b(this).attr("colspan")!==undefined?b(this).attr("colspan"):1),G=(b(this).attr("rowspan")!==undefined?b(this).attr("rowspan"):1),J="",H,P,K="",I,E,Q,M,L;for(H=A,P=(A+O);H<P;H+=1){if(r[H]!==undefined){if(J===""){J=r[H]}else{L=c.removeDuplicateElement(J.split(" ").concat(r[H].split(" ")));J=L.join(" ")}}}if(o[c.rowPos]!==undefined){K=o[c.rowPos]}if(this.nodeName.toLowerCase()==="th"){F.isHeader=true;E=b(this).attr("id");if(E===undefined||E===""){E="graphcellid"+h+"row"+c.rowPos+"col"+A;b(this).attr("id",E)}for(H=0;H<G;H+=1){Q=H+c.rowPos;if(o[Q]===undefined){o[Q]=E}else{o[Q]=o[Q]+" "+E}}}if(G>1){M=G-1;t.push({ele:F,rowspan:M,colpos:A,groupId:v});if(F.isHeader&&c.seriesHeadingLenght>A){C+=1;F.isHeader=true;I={id:c.cellID,level:C,width:G,height:O,header:b(this).text(),groupId:v,isGroup:true,rowPos:c.rowPos,param:c.classToJson(this)};s.headerList.push(I);v=c.cellID}}for(H=1;H<=O;H+=1){F.colPos=H+A;if(F.isHeader){B.push(jQuery.extend(true,{},F))}else{D.push(jQuery.extend(true,{},F))}}A+=O;if(c.seriesHeadingLenght===A){if(!F.isHeader){z=true;u="Serie heading not good, current cell value:"+b(this).text()}x=b(this).text();w=b(this);I={id:c.cellID,level:C,width:G,height:O,header:b(this).text(),groupId:v,isGroup:false,rowPos:c.rowPos,param:c.classToJson(this)};s.headerList.push(I)}b.each(t,function(){if(this.colpos===A&&this.rowspan>0){var R=Number(b(this.ele.obj).attr("colspan")!==undefined?b(this.ele.obj).attr("colspan"):1),T,S;for(H=1;H<=R;H+=1){this.ele.colPos=H+A;if(this.ele.isHeader){B.push(jQuery.extend(true,{},this.ele))}else{D.push(jQuery.extend(true,{},this.ele))}}A+=R;T=(b(this.ele.obj).attr("headers")!==undefined?b(this.ele.obj).attr("headers"):"");S=c.removeDuplicateElement(T.split(" ").concat(o[c.rowPos].split(" ")));b(this.ele.obj).attr("headers",S.join(" "));this.rowspan-=1}})});y={cell:D,cellHeading:B,header:x,headerParam:c.classToJson(w),level:C,GroupId:v,rowPos:c.rowPos,isRejected:z,rejectedRaison:u};if((c.tBodySeries.nbRowLevel<=C||c.tBodySeries.nbRowLevel===undefined)&&!z){c.tBodySeries.nbRowLevel=(C+1)}s.series.push(y);c.rowPos+=1});c.tBodySeries.series.push(s);return})},seriesHeadingLenght:0,setSeriesHeadingLenght:function(){b("tbody:first tr:first th",n).each(function(){var o=Number(b(this).attr("colspan")!==undefined?b(this).attr("colspan"):1);c.seriesHeadingLenght+=o})},rowPos:0,cellID:0,removeDuplicateElement:function(u){var o=[],t,r,s,v;label:for(t=0,r=u.length;t<r;t+=1){for(s=0,v=o.length;s<v;s+=1){if(o[s]===u[t]){continue label}}o[o.length]=u[t]}return o},swapTable:function(){var r=[],v=0,B,u=0,F="Table caption tag is missing",x=10,E=0,C,D=[],o,z,y,w,A;F=b("caption",n).text();b("tr ",n).each(function(){x+=1;if(E<1){b("td,th",b(this)).each(function(){if(b(this).attr("colspan")===undefined){b(this).attr("colspan",1)}x+=Number(b(this).attr("colspan"))})}E+=1});for(E=0;E<x;E+=1){D[E]=[];for(C=0;C<x;C+=1){D[E][C]=0}}b("tr ",n).each(function(){u=0;var t=1,s=1;b("td,th",b(this)).each(function(){if(b(this).attr("colspan")===undefined){b(this).attr("colspan",1)}if(b(this).attr("rowspan")===undefined){b(this).attr("rowspan",1)}t=Number(b(this).attr("colspan"));s=Number(b(this).attr("rowspan"));while(D[v][u]===3){u+=1}var H=v,K=v+s-1,J,G,I;if(s>1&&t>1){J=u;G=u+t-1;for(J=u;J<=G;J+=1){for(H=v;H<=K;H+=1){D[H][J]=3}}}else{if(s>1){for(H=v;H<=K;H+=1){D[H][u]=3}}}I=b(this).clone();I.attr("colspan",s);I.attr("rowspan",t);(r[u]=r[u]||[])[v]=I;u=u+t});v+=1});o=b("<table>");b.each(r,function(G){var t=b("<tr>");o.append(t);b.each(r[G],function(s,H){t.append(H)})});z=o.html();y='<table id="swappedGraph"><caption>'+F+" (Horizontal to Virtical)</caption><thead>";z=z.replace(/<tbody>/gi,y);z=z.replace(/<\/tbody>/gi,"</tbody></table>");z=z.replace(/\n/g,"");z=z.replace(/<tr/gi,"\n<tr");w=z.split("\n");for(v=0,B=w.length;v<B;v+=1){A=w[v];if(A.match(/<td/i)!==null){w[v]="</thead><tbody>"+A;break}}z=w.join("\n");b(z).insertAfter(n).hide();return b(z)},compute:function(){b.each(c.tBodySeries.series,function(){var r,o,s;b.each(this.series,function(){if(!this.isRejected){var v,u,t=0;b.each(this.cell,function(){if(!this.isHeader){if(this.value>v||v===undefined){v=this.value}if(this.value<u||u===undefined){u=this.value}t+=1}});this.maxValue=v;this.minValue=u;this.length=t;if(s===undefined){s=t}if(t!==s){this.isRejected=true;this.rejectedRaison="The data length need to be equal for all the series"}if((v>r||r===undefined)&&!this.isRejected){r=v}if((u<o||o===undefined)&&!this.isRejected){o=u}}});this.maxValue=r;this.minValue=o;this.dataLength=s})},getCellValue:function(r){r=r.replace(/\s\s+/g," ");r=r.replace(/^\s+|\s+$/g,"");var o={cellUnit:r.match(/[^\+\-\.\, 0-9]+[^\-\+0-9]*/),cellValue:parseFloat(r.match(/[\+\-0-9]+[0-9,\. ]*/))};return o},classToJson:function(r,o){var s="";if(typeof(r)==="string"){s=r}else{s=(b(r).attr("class")!==undefined?b(r).attr("class"):"")}return c.setClassOptions(jQuery.extend(true,e.optionsClass,e.axis2dgraph),s,o)},setClassOptions:function(r,x,s){var w="",v="",t=false,u,o;if(typeof(r)!=="object"){return{}}r=jQuery.extend(true,{},r);if(typeof(x)!=="string"||x.lenght===0){return r}if(typeof(s)!=="string"||s.lenght===0){if(r["default-namespace"]&&(typeof(r["default-namespace"])==="string"||b.isArray(r["default-namespace"]))){s=r["default-namespace"]}else{return r}}if(r["default-namespace-separator"]&&typeof(r["default-namespace-separator"])==="string"){w=r["default-namespace-separator"]}else{w="-"}if(r["default-separator"]&&typeof(r["default-separator"])==="string"){v=r["default-separator"]}else{v=" "}if(r["default-autocreate"]){t=true}o=x.split(v);b.each(o,function(){var J,D=r,F,E,K,C,G,z,y,B=false,H=false,I,A;if(b.isArray(s)){for(E=0,K=s.length;E<K;E+=1){if(s[E]===(this.length>s[E].length+w.length?this.slice(0,s[E].length):"")){u=s[E].split(w);J=this.split(w).slice(u.length);F=u[u.length-1];break}}}else{if(s===(this.length>s.length+w.length?this.slice(0,s.length):"")){u=s.split(w);J=this.split(w).slice(u.length);F=u[u.length-1]}}if(J&&F){for(E=0,K=J.length;E<K;E+=1){G=(E+2===K?true:false);z=(E+1===K?true:false);if(z&&K===1&&r["default-option"]){F=r["default-option"]}else{if(!z){F=J[E]}}if(D[F+"-typeof"]){y=[];for(C=(E+1);C<K;C+=1){y.push(J[C])}J[E]=y.join(w);G=false;z=true;switch(D[F+"-typeof"]){case"boolean":if(J[E]==="true"||J[E]==="1"||J[E]==="vrai"||J[E]==="yes"||J[E]==="oui"){J[E]=true}else{if(J[E]==="false"||J[E]==="0"||J[E]==="faux"||J[E]==="no"||J[E]==="non"){J[E]=false}else{J[E]=undefined}}break;case"number":if(!isNaN(parseInt(J[E],10))){J[E]=parseInt(J[E],10)}else{J[E]=undefined}break;case"string":break;case"undefined":case"function":case"locked":J[E]=undefined;break;default:break}}if(D[F+"-overwrite-array-mode"]){B=true}if(D[F+"-autocreate"]){H=true}if(G&&J[E]!==undefined){F=J[E]}else{if(z&&J[E]!==undefined){if(D[F]&&B){if(b.isArray(D[F])){D[F].push(J[E])}else{A=D[F];D[F]=[];D[F].push(A);D[F].push(J[E])}}else{if(D[F]||t||H||D[F]===0||D[F]===false){I="";if(typeof(J[E])==="boolean"||typeof(J[E])==="number"){I='{"'+F+'": '+J[E]+"}"}else{I='{"'+F+'": "'+J[E]+'"}'}D=jQuery.extend(true,D,jQuery.parseJSON(I))}}E=K}else{if(J[E]!==undefined&&D[J[E]]){D=D[J[E]];F=J[E]}else{if((t||H)&&J[E]!==undefined){I='{"'+J[E]+'": {}}';D=jQuery.extend(true,D,jQuery.parseJSON(I));D=D[J[E]]}else{E=K}}}}}}});return r},tBodySeries:{series:[],nbRowLevel:undefined,nbColLevel:undefined}};e=c.setClassOptions(e,(b(n).attr("class")!==undefined?b(n).attr("class"):""));c.param=e;if(a.fn.chartsGraph.graphprocessed&&!a.fn.chartsGraph.graphdelayed){if(!a.fn.chartsGraph.graphstacked){a.fn.chartsGraph.graphstacked=[]}a.fn.chartsGraph.graphstacked.push(k);if(!a.fn.chartsGraph.graphdelayedset){a.fn.chartsGraph.graphdelayedset=true;(function l(){if(f>0){a.fn.chartsGraph.graphdelayed=true}if(a.fn.chartsGraph.graphstacked.length===0){clearTimeout(i);return}a.fn.chartsGraph.generate(a.fn.chartsGraph.graphstacked.shift());f+=1;var o=200;if(e.execdelay){o=e.execdelay}i=setTimeout(l,o)})()}return}a.fn.chartsGraph.graphprocessed=true;c.parse();if(!b(n).data().tblparser){a.fn.parsertable.parse(b(n))}q=function(){var r=b(n).data().tblparser,o=0,s=-1;b.each(r.theadRowStack,function(){b.each(this.cell,function(){if(this.uid>s){s=this.uid;var t={id:this.uid,uniqueID:this.uid,level:o,width:this.width,height:this.height,header:b(this.elem).text(),groupId:0,isGroup:(this.width>1?true:false),colPos:this.colpos-1,param:c.classToJson(b(this.elem))};if(!c.tBodySeries.ColHeading){c.tBodySeries.ColHeading=[]}c.tBodySeries.ColHeading.push(t)}});o+=1});c.tBodySeries.nbColLevel=r.theadRowStack.length;c.rowPos=r.theadRowStack.length-1};q();c.compute();e.width=parseFloat((c.param.width?c.param.width-e.widthPadding:e.width-e.widthPadding));e.width=parseFloat(e.width>(e.maxwidth-e.widthPadding)?e.maxwidth-e.widthPadding:e.width);e.height=parseFloat(c.param.height||e.height);m=c.tBodySeries.nbRowLevel;if(c.param.graph){g=c.param.graph}else{if(c.param.type){g=c.param.type}else{g=e.type}}b.each(c.tBodySeries.series,function(){var A=0,V=[],x=0,O=[],R,s,u="line",w=-1,I=[],D,z="",t={},M={},H=[],J,v=true,C=[],r,Q,B,G,T,F=[],L,S,o,P,y,E,N,U,W,K;if(c.param.type){u=c.param.type}if(this.param.graph){u=this.param.graph}D=u;b.each(this.series,function(){if(this.cellHeading.length===0){this.isRejected=true}if(!this.isRejected){v=false;var X={},Z=[],Y="";if(this.cellHeading.length>m){X=this.cellHeading[m];if(w===X.id){I.push(jQuery.extend(true,{},X))}else{b.each(I,function(){for(R=0,s<this.cell.length;R<s;R+=1){if(Z.length<=R){Z.push(this.cell[R])}else{Z[R]+=this.cell[R]}}});for(R=0,s=Z.length;R<s;R+=1){Z[R]=Z[R]/I.length}if(z==="2daxis"){J={cell:Z,type:D,param:t,header:M};V.push(J)}else{if(z==="cicle"){J={cell:Z,type:D,param:t,header:M};O.push(J)}}I=[];I.push(jQuery.extend(true,{},X));t=X.param}}else{X=this.cellHeading[this.cellHeading.length-1];if(z==="2daxis"){J={cell:H,type:D,param:t,header:M};V.push(J)}else{if(z==="cicle"){J={cell:H,type:D,param:t,header:M};O.push(J)}}H=this.cell;t=X.param}M=X;if(X.param.type){Y=X.param.type}else{Y=u}if(Y==="bar"||Y==="stacked"||Y==="line"||Y==="area"){A+=1;z="2daxis";D=Y}else{if(Y==="pie"){x+=1;z="cicle";D=Y}}w=X.id}});b.each(I,function(){for(R=0,s=this.cell.length;R<s;R+=1){if(C.length<=R){C.push(this.cell[R])}else{C[R]+=this.cell[R]}}});for(R=0,s=C.length;R<s;R+=1){C[R]=C[R]/I.length}if(C.length!==0){H=C}if(z==="2daxis"){J={cell:H,type:D,param:t,header:M};V.push(J)}else{if(z==="cicle"){J={cell:H,type:D,param:t,header:M};O.push(J)}}r={heading:c.tBodySeries.ColHeading,nbRowLevel:c.tBodySeries.nbRowLevel,nbColLevel:c.tBodySeries.nbColLevel,series:V};Q={heading:c.tBodySeries.ColHeading,nbRowLevel:c.tBodySeries.nbRowLevel,nbColLevel:c.tBodySeries.nbColLevel,series:O};if(r.series.length>0){j.graph2dAxis.init(r,e)}if(Q.series.length>0){j.circleGraph.init(Q,e)}B=b("<figure />").insertAfter(c.sourceTblSelf);b(B).width(e.width+e.widthPadding);b(B).addClass(e["default-namespace"]);if(c.param.graphclass){if(b.isArray(c.param.graphclass)){for(R=0,s=c.param.graphclass.length;R<s;R+=1){b(B).addClass(c.param.graphclass[R])}}else{b(B).addClass(c.param.graphclass)}}T=b("caption",c.sourceTblSelf).html();S=function(Y,X){var Z=b(X).children((Raphael.svg?"svg:eq(0)":"div:eq(0)"));F.push(Z);b(Z).attr("role","img");b(Z).attr("aria-label",(Y?b(Y).text()+" ":"")+a.dic.get("%table-following"))};if(Q.series.length===1&&Q.series[0].header.rawValue===T){G=[];L=[];L.push(B);o=new Raphael(b(B).get(0),j.circleGraph.width,j.circleGraph.height);G.push(o);j.circleGraph.generateGraph(L,G)}else{if(Q.series.length>0){G=[];L=[];b.each(Q.series,function(){var X=b("<figcaption />"),Z=b("<figure />"),Y;b(X).append(this.header.rawValue);b(B).append(Z);L.push(Z);Y=new Raphael(b(Z).get(0),j.circleGraph.width,j.circleGraph.height);b(X).prependTo(b(Z));G.push(Y);S(this.header.obj,Z)});j.circleGraph.generateGraph(L,G)}}if(r.series.length>0){G=new Raphael(b(B).get(0),e.width,e.height);j.graph2dAxis.generateGraph(B,G)}if(!v){U=b(n).attr("aria-describedby");E=b("caption",n).data().tblparser;if(E.caption){N=b("<figcaption />");b(B).prepend(N);if(b(E.caption).get(0).nodeType!==3){if(b(E.caption).get(0).nodeName.toLowerCase()==="caption"){b(N).append(b(E.caption).html())}else{b(N).append(b(E.caption).clone())}}else{b(N).append(b("<strong></strong>").append(b(E.caption).text()))}if(E.description){P=E.description;if(P.length>1){P=b(P).wrapAll("<div></div>").parent()}y=b(P).attr("id");if(y===undefined||y===""){y="graphsourcedesc"+new Date().getTime();b(P).attr("id",y)}b(N).append(P);if(U===undefined||U===""){b(n).attr("aria-describedby",y)}}}S(E.caption,B);if(y){b.each(F,function(){b(this).attr("aria-describedby",y)})}if(b(n).attr("aria-label")===undefined||b(n).attr("aria-label")===""){b(n).attr("aria-label",(E.caption?b(E.caption).text()+" ":"")+a.dic.get("%table-mention"))}if(!c.param.noencapsulation){W=b("<details />");K=b("<summary />");b(W).appendTo(B);b(K).text((E.caption?b(E.caption).text()+" ":"")+a.dic.get("%table-mention")).appendTo(W).after(n);a.polyfills.enhance("detailssummary",W)}else{b(n).appendTo(B)}}else{b(B).remove()}})}};window.pe=a;return a}(jQuery));